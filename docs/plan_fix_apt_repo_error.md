# План по исправлению ошибки с параметрами в apt_repository

## Причины ошибки

1. **Неподдерживаемые параметры в apt_repository**:
   - Используются параметры `dist` и `codename`, которые не поддерживаются в текущей версии модуля
   - Модуль `apt_repository` не поддерживает эти параметры

2. **Неправильная конфигурация репозитория**:
   - Репозиторий Matrix.org не может быть добавлен из-за неправильных параметров
   - Это препятствует установке Matrix Synapse

## Решения

### Вариант 1: Удалить неподдерживаемые параметры (рекомендуется)

Обновить задачу `Add Matrix.org repository`, чтобы:
- Удалить параметры `dist` и `codename`, которые не поддерживаются
- Использовать только поддерживаемые параметры модуля `apt_repository`

### Вариант 2: Использовать альтернативный метод добавления репозитория

Обновить задачу, чтобы:
- Создать файл репозитория напрямую в `/etc/apt/sources.list.d/`
- Использовать `template` или `lineinfile` для добавления репозитория

## Рекомендуемое решение

Использовать Вариант 1, так как:
- Это соответствует современным стандартам использования Ansible
- Удаляет неподдерживаемые параметры
- Сохраняет использование модуля `apt_repository`

## План действий

1. Обновить задачу `Add Matrix.org repository` в `tasks/install_synapse.yml`
2. Удалить параметры `dist` и `codename` из задачи
3. Оставить только поддерживаемые параметры
4. Запустить деплой для проверки

## Проверка

После реализации:
- Убедиться, что репозиторий Matrix.org успешно добавляется
- Проверить, что установка Matrix Synapse проходит успешно
- Убедиться, что деплой завершается без ошибок