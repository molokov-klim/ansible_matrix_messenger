# Configuration file for Matrix Synapse
server_name: "{{ domain_name }}"
public_baseurl: "https://{{ domain_name }}"

listeners:
  - port: 8008
    tls: false
    type: http
    x_forwarded: true
    resources:
      - names: [client, federation]
        compress: false

database:
  name: psycopg2
  args:
    user: {{ matrix_db_user }}
    password: {{ matrix_db_password }}
    database: {{ matrix_db_name }}
    host: localhost
    cp_min: 5
    cp_max: 10

media_store_path: /var/lib/matrix-synapse/media
uploads_path: /var/lib/matrix-synapse/uploads

registration_shared_secret: "{{ lookup('password', '/dev/null length=64 chars=ascii_letters,digits') }}"

macaroon_secret_key: "{{ lookup('password', '/dev/null length=64 chars=ascii_letters,digits') }}"

form_secret: "{{ lookup('password', '/dev/null length=64 chars=ascii_letters,digits') }}"

report_stats: false